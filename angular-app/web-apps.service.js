"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var fs = require("fs");
function getDockerfileContext() {
    var DockerfileContent = "\n        FROM node:18-alpine as builder\n        RUN npm install -g pnpm\n        WORKDIR /app\n        COPY . .\n        RUN if [ -f \"./package-lock.json\" ]; then npm install;             elif [ -f \"./yarn.lock\" ]; then yarn;             elif [ -f \"./pnpm-lock.yaml\" ]; then pnpm install;fi\n        COPY . .\n        RUN npm run build\n        FROM nginxinc/nginx-unprivileged:stable-alpine-slim\n\n        # Update nginx user/group in alpine\n        ENV ENABLE_PERMISSIONS=TRUE\n        ENV DEBUG_PERMISSIONS=TRUE\n        ENV USER_NGINX=10015\n        ENV GROUP_NGINX=10015\n        \n        RUN echo '$(getCustomErrorPageContent())' > /usr/share/nginx/html/error_404.html\n        RUN echo '$(getNginxConfig())' > /usr/share/nginx/conf.d/default.conf\n\n\n        COPY --from=builder /app/dist/angular-app/ /usr/share/nginx/html/\n        USER 10015\n        EXPOSE 8080\n        CMD [\"nginx\", \"-g\", \"daemon off;\"]\n        ";
    return DockerfileContent;
}
function getCustomErrorPageContent() {
    return "\n  <!DOCTYPE html>\n  <html lang=\"en\">\n  <head>\n    <meta charset=\"utf-8\">\n    <title>Error</title>\n  </head>\n  <body>\n    <pre>Internal Server Error</pre>\n  </body>\n  </html>\n  ";
}
function getNginxConfig() {
    return "\n  server {                                                                                                                                                                                                              \n    listen       8080;                                                                                                                                                                                                \n    server_name  localhost;                                                                                                                                                                                           \n                                                                                                                                                                                                                      \n    #access_log  /var/log/nginx/host.access.log  main;                                                                                                                                                                \n                                                                                                                                                                                                                      \n    location / {                                                                                                                                                                                                      \n        root   /usr/share/nginx/html;                                                                                                                                                                                 \n        index  index.html index.htm;                                                                                                                                                                                  \n    }                                                                                                                                                                                                                 \n                                                                                                                                                                                                                      \n    error_page  404              /error_404.html;  \n    location = /error_404.html {                                                                                                                                                                                            \n        root   /usr/share/nginx/html;                                                                                                                                                                                 \n    }                                                                                                                                                                           \n                                                                                                                                                                                                                      \n    # redirect server error pages to the static page /50x.html                                                                                                                                                        \n    #                                                                                                                                                                                                                 \n    error_page   500 502 503 504  /50x.html;                                                                                                                                                                          \n    location = /50x.html {                                                                                                                                                                                            \n        root   /usr/share/nginx/html;                                                                                                                                                                                 \n    }                                                                                                                                                                                                                 \n                                                                                                                                                                                                               \n}  \n  ";
}
var dockerfileContent = getDockerfileContext();
fs.writeFileSync('Dockerfile', dockerfileContent, 'utf-8');
